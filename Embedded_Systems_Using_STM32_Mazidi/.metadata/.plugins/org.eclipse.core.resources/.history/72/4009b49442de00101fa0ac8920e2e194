#ifndef USART_H_
#define USART_H_

// Includes
#include "stm32f4xx.h"
#include <stdio.h>

// Defines
#define USART2_CLK_EN		(1UL << 17)
#define GPIOA_CLK_EN		(1UL << 0)
#define USART2_OVER8_EN		(1UL << 15)
#define USART2_TX_EN		(1UL << 3)
#define USART2_EN			(1UL << 13)
#define USART2_TXE			(1UL << 7)

// Function declarations
void usart2_init(void);
int usart2_write(int data);

// Setup printf to send data via USART to COM PORT
struct __FILE
{
	int handle;
};

FILE __stdout = {1};
int fputc(int data, FILE *f)
{
	return usart2_write(data);
}

#endif /* USART_H_ */
